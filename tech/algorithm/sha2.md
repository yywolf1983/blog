# SHA256原理


## 初始化

这些初值是对自然数中前8个质数（2,3,5,7,11,13,17,19）的平方根的小数部分取前32bit而来
和8个哈希初值类似，这些常量是对自然数中前64个质数(2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97…)的立方根的小数部分取前32bit而来。


## 附加填充比特

在报文末尾进行填充，使报文长度在对512取模以后的余数是448
填充是这样进行的：先补第一个比特为1，然后都补0，直到长度满足对512取模后余数是448。
需要注意的是，信息必须进行填充，也就是说，即使长度已经满足对512取模后余数是448，补位也必须要进行，这时要填充512个比特。

### 为什么是448?

因为在第一步的预处理后，第二步会再附加上一个64bit的数据，用来表示原始报文的长度信息。而448+64=512，正好拼成了一个完整的结构。

## 附加长度值

SHA256用一个64位的数据来表示原始消息的长度。
因此，通过SHA256计算的消息长度必须要小于$ 2^64，当然绝大多数情况这足够大了。

## 逻辑运算
SHA256散列函数中涉及的操作全部是逻辑的位运算

包括如下的逻辑函数：

## 计算消息摘要

    1. 首先：将消息分解成512-bit大小的块
    2. 构造64个字
    3. 进行64次循环