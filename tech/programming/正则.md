 ++ 正则

. 匹配任何一个字符
$ 匹配行结束
^ 匹配行开始
\ 引用符号 \$ 匹配美元符号
[] 包括
[^] 不包括  [A-Za-z0-9]  匹配所有
\< \> 词匹配
\( \) 组匹配
|  或
x+  匹配1次x 或者多次
x?  匹配1次x 或者零次
x*  匹配0次x 或者多次
{i}   匹配制定数目的字符
{i,j}   匹配连续数目

(a|b|c) 要么匹配 a，要么匹配 b，要么匹配 c。

\w 任意字符
\W 非数字字符
\s 空白符号
\S 非空白符号
\d 数字
\D 任意非数字
\b 单词的开始或结束

^\d{5,12}$  匹配qq


Email 匹配正则
[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?

[abc] 表示“a”或“b”或“c”
[0-9] 表示0~9中任意一个数字，等价于[0123456789]
[\u4e00-\u9fa5] 表示任意一个汉字
[^a1<] 表示除“a”、“1”、“<”外的其它任意一个字符
[^a-z] 表示除小写字母外的任意一个字符


\d 任意一个数字，相当于[0-9]，即0~9 中的任意一个
\w 任意一个字母或数字或下划线，相当于[a-zA-Z0-9_]
\s 任意空白字符，相当于[ \r\n\f\t\v]
\D 任意一个非数字字符，\d取反，相当于[^0-9]
\W \w取反，相当于[^a-zA-Z0-9_]
\S 任意非空白字符，\s取反，相当于[^ \r\n\f\t\v]


. 匹配除了换行符 \n 以外的任意一个字符


^ 匹配字符串开始的位置，不匹配任何字符
$ 匹配字符串结束的位置，不匹配任何字符
\b 匹配单词边界，不匹配任何字符


\r，\n 回车和换行
\\ 匹配“\”本身
\^，\$，\. 分别匹配“^”、“$”和“.”


{m}    表达式匹配m次 “\d{3}”相当于“\d\d\d ”
{m,n}  表达式匹配最少m次，最多n次
{m,}   表达式至少匹配m次
?      表达式匹配0次或1次，相当于{0,1}
*      表达式匹配0次或任意多次，相当于{0,}
+      表达式匹配1次或意多次，至少1次，相当于{1,}


|      多个子表达式之间取“或”的关系








正则表达式进阶


捕获组（Capture Group）


捕获组就是把正则表达式中子表达式匹配的内容，保存到内存中以数字编号或手动命名的组里，以供后面引用。
表达式
说明
(Expression)  普通捕获组，将子表达式Expression匹配的内容保存到以数字编号的组里
(?<name> Expression)  命名捕获组，将子表达式Expression匹配的内容保存到以name命名的组里
普通捕获组（在不产生歧义的情况下，简称捕获组）是以数字进行编号的，编号规则是以“(”从左到右出现的顺序，从1开始进行编号。通常情况下，编号为0的组表示整个表达式匹配的内容。
命名捕获组可以通过捕获组名，而不是序号对捕获内容进行引用，提供了更便捷的引用方式，不用关注捕获组的序号，也不用担心表达式部分变更会导致引用错误的捕获组。


非捕获组


一些表达式中，不得不使用( )，但又不需要保存( )中子表达式匹配的内容，这时可以用非捕获组来抵消使用( )带来的副作用。
表达式
说明
(?:Expression)  进行子表达式Expression的匹配，并将匹配内容保存到最终的整个表达式的区配结果中，但Expression匹配的内容不单独保存到一个组内


反向引用


捕获组匹配的内容，可以在正则表达式的外部程序中进行引用，也可以在表达式中进行引用，表达式中引用的方式就是反向引用。
反向引用通常用来查找重复的子串，或是限定某一子串成对出现。
表达式
说明
\1，\2  对序号为1和2的捕获组的反向引用
\k<name>  对命名为name的捕获组的反向引用
举例：
“(a|b)\1”在匹配“abaa”时，匹配成功，匹配到的结果是“aa”。“(a|b)”在尝试匹配时，虽然既可以匹配“a”，也可以匹配“b”，但是在进行反向引用时，对应()中匹配的内容已经是固定的了。


环视（Look Around）
环视只进行子表达式的匹配，匹配内容不计入最终的匹配结果，是零宽度的。
环视按照方向划分有顺序和逆序两种，按照是否匹配有肯定和否定两种，组合起来就有四种环视。环视相当于对所在位置加了一个附加条件。
 
表达式
说明
(?<=Expression)  逆序肯定环视，表示所在位置左侧能够匹配Expression
(?<!Expression)  逆序否定环视，表示所在位置左侧不能匹配Expression
(?=Expression)   顺序肯定环视，表示所在位置右侧能够匹配Expression
(?!Expression)   顺序否定环视，表示所在位置右侧不能匹配Expression
举例：
“(?<=Windows )\d+”在匹配“Windows 2003”时，匹配成功，匹配结果为“2003”。我们知道“\d+”表示匹配一个以上的数字，而“(?<=Windows )”相当于一个附加条件，表示所在位置左侧必须为“Windows ”，它所匹配的内容并不计入匹配结果。同样的正则在匹配“Office 2003”时，匹配失败，因为这里任意一串数字子串的左侧都不是“Windows ”。
“(?!1)\d+”在匹配“123”时，匹配成功，匹配的结果为“23”。“\d+”匹配一个以上数字，但是附加条件“(?!1)”要求所在位置右侧不能是“1”，所以匹配成功的位置是“2”前面的位置。




忽略优先和匹配优先


或者叫做正则表达式匹配的贪婪与非贪婪模式。
标准量词修饰的子表达式，在可匹配可不匹配的情况下，总会先尝试进行匹配，称这种方式为匹配优先，或者贪婪模式。此前介绍的一些量词，“{m}”、“{m,n}”、“{m,}”、“?”、“*”和“+”都是匹配优先的。
一些NFA正则引擎支持忽略优先量词，也就是在标准量词后加一个“?”，此时，在可匹配可不匹配的情况下，总会先忽略匹配，只有在由忽略优先量词修饰的子表达式，必须进行匹配才能使整个表达式匹配成功时，才会进行匹配，称这种方式为忽略优先，或者非贪婪模式。忽略优先量词包括“{m}?”、“{m,n}?”、“{m,}?”、“??”、“*?”和“+?”。
举例：
源字符串：<div>aaa</div><div>bbb</div>
正则表达式1：<div>.*</div>      匹配结果：<div>aaa</div><div>bbb</div>
正则表达式2：<div>.*?</div>     匹配结果：<div>aaa</div>
